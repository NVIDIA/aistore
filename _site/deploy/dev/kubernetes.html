<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>DEPLOY/DEV/KUBERNETES | AIStore - distributed object storage</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="DEPLOY/DEV/KUBERNETES" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="AIStore is a lightweight object storage system with the capability to linearly scale-out with each added storage node and a special focus on petascale deep learning. See more at: github.com/NVIDIA/aistore" />
<meta property="og:description" content="AIStore is a lightweight object storage system with the capability to linearly scale-out with each added storage node and a special focus on petascale deep learning. See more at: github.com/NVIDIA/aistore" />
<link rel="canonical" href="http://localhost:4000/aistore/deploy/dev/kubernetes" />
<meta property="og:url" content="http://localhost:4000/aistore/deploy/dev/kubernetes" />
<meta property="og:site_name" content="AIStore - distributed object storage" />
<script type="application/ld+json">
{"headline":"DEPLOY/DEV/KUBERNETES","@type":"WebPage","url":"http://localhost:4000/aistore/deploy/dev/kubernetes","description":"AIStore is a lightweight object storage system with the capability to linearly scale-out with each added storage node and a special focus on petascale deep learning. See more at: github.com/NVIDIA/aistore","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/aistore/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/aistore/feed.xml" title="AIStore - distributed object storage" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/aistore/">AIStore - distributed object storage</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">DEPLOY/DEV/KUBERNETES</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="" itemprop="datePublished">
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h2 id="disclaimer">Disclaimer</h2>
<blockquote>
  <p>For a more robust version, the development team has switched over to Docker. If you would like to deploy AIS in a containerized environment, consider using Docker. The Docker folder can be found in <a href="/deploy/dev/docker"><code class="highlighter-rouge">deploy/dev/docker</code></a>.</p>
</blockquote>

<h2 id="kubeadm-deploying-an-aistore-cluster">Kubeadm: Deploying an AIStore Cluster</h2>
<p>For development purposes, we are going to use <a href="https://kubernetes.io/docs/reference/setup-tools/kubeadm/kubeadm/">Kubeadm</a> to create a simple two node cluster with any number of proxies and any number of targets. Users can also decide to deploy AIS with a single-node.</p>

<p><img src="../../../docs/images/k8s_arch.png" width="50%" /></p>

<blockquote>
  <p>Using <a href="https://kubernetes.io/docs/getting-started-guides/minikube/">Minikube</a> to deploy a Kubernetes cluster will also work for deploying single node clusters. It cannot be used for multi-node deployments due to its limitations.</p>
</blockquote>

<h3 id="prerequisites">Prerequisites</h3>
<p>AIStore on Kubernetes utilizes a <a href="https://docs.docker.com/registry/deploying/">local Docker repository</a>. This allows Kubernetes nodes to build the latests AIS version directly from the source without having to fetch from a remote registry. This guide uses your local machine as the local Docker registry host. You will also need Docker-Compose installed. For more information, see <a href="../../../docs/docker_main.md">Docker and Docker-Compose installation guide</a></p>

<h3 id="creating-a-local-docker-registry-for-local-networks">Creating a local Docker registry for local networks</h3>
<ol>
  <li>Create a self signed certificate for your Docker registry. This will allow your Kubernetes nodes on the same network to pull images from the local Docker repository.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>vim /etc/ssl/openssl.cnf
</code></pre></div>    </div>
    <p>Add the line <code class="highlighter-rouge">subjectAltName=IP:&lt;YOUR_IPv4_ADDRESS&gt;</code> below the section labeled <code class="highlighter-rouge">[ v3_ca ]</code>.</p>
  </li>
  <li>Create a certificate directory
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo mkdir</span> /certs
</code></pre></div>    </div>
  </li>
  <li>Create the certificate
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>openssl req <span class="se">\</span>
  <span class="nt">-newkey</span> rsa:4096 <span class="nt">-nodes</span> <span class="nt">-sha256</span> <span class="nt">-keyout</span> /certs/domain.key <span class="se">\</span>
  <span class="nt">-x509</span> <span class="nt">-days</span> 365 <span class="nt">-out</span> /certs/domain.crt
</code></pre></div>    </div>
    <p>You’ll be prompted to fill out some information for your certificate. You should end up with two files <code class="highlighter-rouge">domain.crt</code> and <code class="highlighter-rouge">domain.key</code>.</p>
  </li>
  <li>To allow access for Docker to trust these certificates,
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo mkdir</span> <span class="nt">-p</span> /etc/docker/certs.d/&lt;YOUR_IPv4_ADDRESS&gt;:5000
<span class="nv">$ </span><span class="nb">sudo cp</span> /certs/domain.crt /etc/docker/certs.d/&lt;YOUR_IPv4_ADDRESS&gt;:5000/
<span class="nv">$ </span><span class="nb">cd</span> /etc/docker/certs.d/&lt;YOUR_IPv4_ADDRESS&gt;:5000/
<span class="nv">$ </span><span class="nb">sudo mv </span>domain.crt ca.crt
</code></pre></div>    </div>
  </li>
  <li>Reload the Docker daemon to use the new certificate
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>service docker reload
</code></pre></div>    </div>
  </li>
  <li>On your other Kubernetes nodes, copy the <code class="highlighter-rouge">ca.crt</code> file to <code class="highlighter-rouge">etc/docker/certs.d/&lt;YOUR_IPv4_ADDRESS&gt;:5000</code>
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo mkdir</span> <span class="nt">-p</span> /etc/docker/certs.d/&lt;YOUR_IPv4_ADDRESS&gt;:5000
</code></pre></div>    </div>
    <p>Copy the contents of <code class="highlighter-rouge">ca.crt</code> to the directory and reload the Docker service with</p>
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>service docker reload
</code></pre></div>    </div>
    <blockquote>
      <p>If you change or create a new certificate, and you already have an AIS instance running on Kubernetes, running <code class="highlighter-rouge">sudo service docker reload</code> might not be enough to tell Docker to use your new certificate. You might also need to delete your local Docker registry (<code class="highlighter-rouge">docker ps</code> and look for the “registry” Docker container) and run <code class="highlighter-rouge">sudo ./deploy_kubernetes</code> again.</p>
    </blockquote>
  </li>
</ol>

<h3 id="setup-with-kubeadm">Setup with Kubeadm</h3>

<p>We can use our local machine to host our Kubernetes cluster. For multi-node clusters, Kubeadm requires VMs or other physical machines to host the nodes.</p>

<ol>
  <li><a href="https://kubernetes.io/docs/setup/independent/install-kubeadm/">Install Kubeadm</a> and <a href="https://kubernetes.io/docs/reference/command-line-tools-reference/kubelet/">kubelet</a> and <a href="https://kubernetes.io/docs/reference/kubectl/overview/">kubectl</a> tools.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>apt-get update <span class="o">&amp;&amp;</span> <span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> apt-transport-https curl
<span class="nv">$ </span>curl <span class="nt">-s</span> https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -
<span class="nv">$ </span><span class="nb">sudo cat</span> <span class="o">&lt;&lt;</span><span class="no">EOF</span><span class="sh"> &gt;/etc/apt/sources.list.d/kubernetes.list
 deb https://apt.kubernetes.io/ kubernetes-xenial main
</span><span class="no"> EOF
</span><span class="nv">$ </span><span class="nb">sudo </span>apt-get update
<span class="nv">$ </span><span class="nb">sudo </span>apt-get <span class="nb">install</span> <span class="nt">-y</span> kubelet kubeadm kubectl
<span class="nv">$ </span><span class="nb">sudo </span>apt-mark hold kubelet kubeadm kubectl
</code></pre></div>    </div>
  </li>
  <li>
    <p><a href="https://docs.docker.com/install/">Install Docker</a></p>
  </li>
  <li>Disable swap memory. Kubeadm requires that swap memory is disabled.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>swapoff <span class="nt">-a</span>
</code></pre></div>    </div>
  </li>
  <li>Disable your firewall to allow DNS resolution for the pods in the Kubernetes cluster.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>ufw disable
</code></pre></div>    </div>
  </li>
</ol>

<blockquote>
  <p>For multi-node Kubernetes clusters, you need perform the same steps on each machine</p>
</blockquote>

<h4 id="deploying-a-two-node-cluster">Deploying a Two-Node Cluster</h4>

<ol>
  <li>Initialize the Kubernetes cluster with your local machine as the host.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>kubeadm init <span class="nt">--pod-network-cidr</span><span class="o">=</span>10.244.0.0/16
</code></pre></div>    </div>
  </li>
</ol>

<p>The <code class="highlighter-rouge">--pod-network-cidr</code> allocates a CIDR for every node. This is a requirement by <a href="https://github.com/coreos/flannel">flannel</a>.</p>
<blockquote>
  <p>Flannel is a virtual network that gives a subnet to each node for use with container(<a href="https://kubernetes.io/docs/concepts/workloads/pods/pod">pod</a>) runtimes.</p>
</blockquote>

<blockquote>
  <p>Ensure that Docker and Kubeadm are installed on all machines in the cluster</p>
</blockquote>

<ol>
  <li>Once Kubeadm finishes initializing, a set of commands should appear on the screen.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">mkdir</span> <span class="nt">-p</span> <span class="nv">$HOME</span>/.kube
<span class="nv">$ </span><span class="nb">sudo cp</span> <span class="nt">-i</span> /etc/kubernetes/admin.conf <span class="nv">$HOME</span>/.kube/config
<span class="nv">$ </span><span class="nb">sudo chown</span> <span class="si">$(</span><span class="nb">id</span> <span class="nt">-u</span><span class="si">)</span>:<span class="si">$(</span><span class="nb">id</span> <span class="nt">-g</span><span class="si">)</span> <span class="nv">$HOME</span>/.kube/conf
</code></pre></div>    </div>
    <p>This allows non-root users to use <code class="highlighter-rouge">kubectl</code>.</p>
  </li>
  <li>Configure the pod network add-on. This will be used to allow pods to communicate with each other.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl apply <span class="nt">-f</span> https://raw.githubusercontent.com/coreos/flannel/bc79dd1505b0c8681ece4de4c0d86c5cd2643275/Documentation/kube-flannel.yml
</code></pre></div>    </div>
    <p>Also make sure that <code class="highlighter-rouge">/proc/sys/net/bridge/bridge-nf-call-iptables</code> is set to <code class="highlighter-rouge">1</code> by running</p>
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>sysctl net.bridge.bridge-nf-call-iptables<span class="o">=</span>1
</code></pre></div>    </div>
  </li>
  <li>You should have received a command with the form,
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubeadm <span class="nb">join</span> &lt;MASTER_NODE_IP&gt; <span class="nt">--token</span> &lt;TOKEN&gt; <span class="nt">--discovery-token-ca-cert-hash</span> &lt;HASH&gt;
</code></pre></div>    </div>
    <p>Use this to join the nodes to your cluster.</p>
  </li>
  <li>Once that is setup, you should see that your Kubernetes nodes has been created. Check with
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get nodes
</code></pre></div>    </div>
    <p>The name of the nodes should be the the name of your machines that they are running on. If the status is <code class="highlighter-rouge">NotReady</code>, wait for a couple of seconds and check again.</p>
  </li>
  <li>Once the status is <code class="highlighter-rouge">Ready</code>, add labels to your nodes and untaint the master node.
    <ul>
      <li>Add a label:</li>
    </ul>
  </li>
</ol>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># Assigns the node to host the proxy Pod</span>
<span class="nv">$ </span>kubectl label node &lt;YOUR_NODE_NAME_HERE&gt; <span class="nv">nodename</span><span class="o">=</span>ais-proxy

<span class="c"># Assigns the node to host the target Pods</span>
<span class="nv">$ </span>kubectl label node &lt;YOUR_NODE_NAME_HERE&gt; <span class="nv">nodename</span><span class="o">=</span>ais-target
</code></pre></div></div>
<p>This allows the pods to be assigned to particular nodes.</p>

<blockquote>
  <p>For a single node cluster, assign the nodename to be ‘ais’</p>
</blockquote>

<ul>
  <li>untaint the node:</li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl taint nodes <span class="nt">--all</span> node-role.kubernetes.io/master-
</code></pre></div></div>
<p>This allows for pods to be scheduled on the host/master node.</p>

<ol>
  <li>Run the deployment script <code class="highlighter-rouge">sudo ./deploy_kubernetes.sh</code>.
    <blockquote>
      <p>This is still under development. It currently only works with one proxy and any number of targets.
If the pod is stuck on <code class="highlighter-rouge">ContainerCreating</code> status, you can check the logs using <code class="highlighter-rouge">kubectl describe pods &lt;POD_NAME&gt;</code></p>
    </blockquote>
  </li>
  <li>After a minute, you should see that the pods are running with <code class="highlighter-rouge">kubectl get pods -o wide</code>.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get pods <span class="nt">-o</span> wide

 NAME                               READY   STATUS    RESTARTS   AGE   IP           NODE           NOMINATED NODE   READINESS GATES
 aisprimaryproxy-77456674db-6fzq5   1/1     Running   0          89s   10.244.0.4   ais-master     &lt;none&gt;           &lt;none&gt;
 aistarget-5b6c698c8-f87mm          1/1     Running   0          39s   10.244.1.1   ais-worker1    &lt;none&gt;           &lt;none&gt;
</code></pre></div>    </div>
  </li>
  <li>You can also scale the number of storage targets.
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl scale <span class="nt">--replicas</span><span class="o">=</span>&lt;REPLICA_COUNT&gt; <span class="nt">-f</span> aistarget_deployment.yml
</code></pre></div>    </div>
    <p>Setting the number of replicas to <code class="highlighter-rouge">6</code> will create six targets.</p>
  </li>
</ol>

<h4 id="interacting-with-the-cluster">Interacting with the Cluster</h4>
<p>To interact with the cluster, install the <code class="highlighter-rouge">AIS</code> CLI tool</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> ../../../cli
<span class="nv">$ </span>./install.sh
</code></pre></div></div>
<p>This will create a binary named <code class="highlighter-rouge">ais</code> that can be used to interact with the cluster. Configure the CLI tool to point to the Kubernetes cluster by assigning the <code class="highlighter-rouge">AIS_URL</code> environment variable to the URL of the primary proxy.</p>

<p>Example:</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">export </span><span class="nv">AIS_URL</span><span class="o">=</span>http://10.244.0.4:8080
</code></pre></div></div>

<p>For the list of available commands, see <a href="../../../cli/README.md">here</a>.</p>

<ul>
  <li>To run tests, SSH into the primary proxy</li>
</ul>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl <span class="nb">exec</span> <span class="nt">-it</span> &lt;AIS_PRIMARY_PROXY_NAME&gt; <span class="nt">--</span> /bin/bash
</code></pre></div></div>
<p>Once inside the container, go to the <code class="highlighter-rouge">$WORKDIR</code></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">cd</span> <span class="nv">$WORKDIR</span>
</code></pre></div></div>
<p>From there you can run tests using,</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ CGO_ENABLED</span><span class="o">=</span>0 <span class="nv">BUCKET</span><span class="o">=</span>yourS3Bucket go <span class="nb">test</span> ./tests <span class="nt">-v</span> <span class="nt">-count</span><span class="o">=</span>1
</code></pre></div></div>
<p>This runs the entire test suite. To run specific tests, use the <a href="https://golang.org/pkg/testing/#hdr-Subtests_and_Sub_benchmarks"><code class="highlighter-rouge">-run</code></a> tag.</p>

<h4 id="stopping-the-cluster">Stopping the Cluster</h4>
<ol>
  <li>
    <p>Run <code class="highlighter-rouge">./stop_kubernetes.sh</code> to teardown the deployments.</p>
  </li>
  <li>
    <p>To teardown the Kubernetes cluster:</p>
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>kubeadm reset
</code></pre></div>    </div>
  </li>
</ol>

<h4 id="useful-kubernetes-commands">Useful Kubernetes commands</h4>
<ol>
  <li>To list all the running pods
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl get pods <span class="nt">-o</span> wide

 NAME                                READY     STATUS    RESTARTS   AGE      IP           NODE
 aisprimaryproxy-77456674db-6fzq5    1/1       Running   0          89s      10.244.0.4   ais-master
 aistarget-5b6c698c8-f87mm           1/1       Running   0          39s      10.244.1.1   ais-worker1
</code></pre></div>    </div>
  </li>
  <li>To view pod logs, run <code class="highlighter-rouge">kubectl logs &lt;pod_name&gt;</code>
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl logs aistarget-5b6c698c8-bdgc5

 I 18:57:42.232529 config.go:447 Logdir: <span class="s2">"/tmp/ais/log"</span> Proto: tcp Port: 8080 Verbosity: 3
 I 18:57:42.232823 config.go:449 Config: <span class="s2">"/aisconfig/ais.json"</span> StatsTime: 10s
 I 18:57:42.232864 daemon.go:194 version: 6d9c095 | build_time: 2019-02-01T18:57:39+0000
 I 18:57:42.233194 utils.go:108 Found only one IPv4: 10.244.0.50, MTU 1450
 W 18:57:42.233208 utils.go:110 IPv4 10.244.0.50 MTU size is small: 1450
 I 18:57:42.233407 httpcommon.go:291 Configured PUBLIC NETWORK address: <span class="o">[</span>10.244.0.50:8080] <span class="o">(</span>out of: <span class="o">)</span>
 I 18:57:42.235359 daemon.go:245 Warning: configuring 1 fspaths <span class="k">for </span>testing
 I 18:57:42.237140 keepalive.go:377 Starting targetkeepalive
 I 18:57:42.237150 iostat_linux.go:91 Starting iostat
 I 18:57:42.237182 fshc.go:88 Starting fshc
 I 18:57:42.237162 atime.go:151 Starting atime
 I 18:57:42.237292 common_stats.go:192 Starting storstats
 I 18:57:42.237447 mem.go:890 Starting gmem2, minfree 1.25GiB, low 3.76GiB, timer 2m0s
 I 18:57:42.237468 mem.go:890 gmem2: free memory 27.07GiB <span class="o">&gt;</span> 80% total
 I 18:57:42.242928 clustermap.go:314 registered smap-listener aistarget-5b6c698c8-bdgc52019-02-01T18:57:39+0000<span class="o">=&gt;</span>public/rebalance
 I 18:57:42.242955 target.go:261 target aistarget-5b6c698c8-bdgc52019-02-01T18:57:39+0000 is ready
 I 18:57:42.256547 mem.go:890 Starting ec, minfree 2.71GiB, low 8.12GiB, timer 2m0s
 I 18:57:42.256565 mem.go:890 ec: free memory 27.07GiB <span class="o">&gt;</span> 80% total
 I 18:57:42.901475 httpcommon.go:980 receive Smap v1 <span class="o">(</span><span class="nb">local </span>v0<span class="o">)</span>, ntargets 1, action early-start-have-registrations
 I 18:57:42.901507 target.go:3344 receive Smap: v1, ntargets 1, primary aisprimaryproxy-77456674db-6mvkb2019-02-01T18:56:48+0000, action early-start-have-registrations
 I 18:57:42.901517 target.go:3349 target: aistarget-5b6c698c8-bdgc52019-02-01T18:57:39+0000 &lt;<span class="o">=</span> self
 I 18:57:42.903763 target.go:3288 receive bucket-metadata: version 1, action early-start-have-registrations
 I 18:57:43.910116 httpcommon.go:980 receive Smap v2 <span class="o">(</span><span class="nb">local </span>v1<span class="o">)</span>, ntargets 1, action primary-started-up
 I 18:57:43.910145 target.go:3344 receive Smap: v2, ntargets 1, primary aisprimaryproxy-77456674db-6mvkb2019-02-01T18:56:48+0000, action primary-started-up
 I 18:57:43.910156 target.go:3349 target: aistarget-5b6c698c8-bdgc52019-02-01T18:57:39+0000 &lt;<span class="o">=</span> self
 I 18:57:44.244925 target.go:3432 cluster started up
 I 18:57:52.237593 <span class="o">{</span><span class="s2">"up.μs.time"</span>:10000264<span class="o">}</span>
 I 18:57:52.241998 sda, 0.00, 8.00, 0.00, 0.03, 0.00, 0.00, 0.00, 0.00, 0.00, 0.25, 0.00, 0.00, 3.50, 0.25, 0.20
 I 18:58:02.237536 <span class="o">{</span><span class="s2">"kalive.μs"</span>:858,<span class="s2">"up.μs.time"</span>:20000268<span class="o">}</span>
 I 18:58:02.241988 sda, 0.00, 8.00, 0.00, 0.03, 0.00, 0.00, 0.00, 0.00, 0.00, 0.25, 0.00, 0.00, 3.50, 0.25, 0.20
 I 18:58:12.237533 <span class="o">{</span><span class="s2">"kalive.μs"</span>:788,<span class="s2">"up.μs.time"</span>:30000267<span class="o">}</span>
 I 18:58:12.241953 sda, 0.00, 8.00, 0.00, 0.04, 0.00, 3.50, 0.00, 30.43, 0.00, 0.50, 0.00, 0.00, 5.75, 0.50, 0.40
 I 18:58:22.237577 <span class="o">{</span><span class="s2">"kalive.μs"</span>:800,<span class="s2">"up.μs.time"</span>:40000290<span class="o">}</span>
 I 18:58:22.242014 sda, 0.00, 9.50, 0.00, 0.08, 0.00, 10.50, 0.00, 52.50, 0.00, 0.63, 0.01, 0.00, 8.42, 0.63, 0.60
 I 18:58:32.237538 <span class="o">{</span><span class="s2">"kalive.μs"</span>:829,<span class="s2">"up.μs.time"</span>:50000281<span class="o">}</span>
</code></pre></div>    </div>
  </li>
  <li>To ssh into a pod
    <div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>kubectl <span class="nb">exec</span> &lt;pod_name&gt; <span class="nt">-i</span> <span class="nt">-t</span> /bin/bash
</code></pre></div>    </div>
    <p>Example: <code class="highlighter-rouge">kubectl exec aisproxy-84999457d6-8qk6x -i -t /bin/bash</code></p>
  </li>
</ol>

  </div><a class="u-url" href="/aistore/deploy/dev/kubernetes" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/aistore/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">AIStore - distributed object storage</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">AIStore - distributed object storage</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>AIStore is a lightweight object storage system with the capability to linearly scale-out with each added storage node and a special focus on petascale deep learning. See more at: github.com/NVIDIA/aistore
</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
