<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>OBJECT | AIStore - distributed object storage</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="OBJECT" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="AIStore is a lightweight object storage system with the capability to linearly scale-out with each added storage node and a special focus on petascale deep learning. See more at: github.com/NVIDIA/aistore" />
<meta property="og:description" content="AIStore is a lightweight object storage system with the capability to linearly scale-out with each added storage node and a special focus on petascale deep learning. See more at: github.com/NVIDIA/aistore" />
<link rel="canonical" href="http://localhost:4000/aistore/cli/resources/object" />
<meta property="og:url" content="http://localhost:4000/aistore/cli/resources/object" />
<meta property="og:site_name" content="AIStore - distributed object storage" />
<script type="application/ld+json">
{"headline":"OBJECT","@type":"WebPage","url":"http://localhost:4000/aistore/cli/resources/object","description":"AIStore is a lightweight object storage system with the capability to linearly scale-out with each added storage node and a special focus on petascale deep learning. See more at: github.com/NVIDIA/aistore","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/aistore/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/aistore/feed.xml" title="AIStore - distributed object storage" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/aistore/">AIStore - distributed object storage</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">OBJECT</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="" itemprop="datePublished">
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h2 id="operations-on-objects">Operations on objects</h2>

<h3 id="get">GET</h3>

<p><code class="highlighter-rouge">ais get BUCKET_NAME/OBJECT_NAME OUT_FILE</code></p>

<p>GET object from bucket.</p>

<table>
  <thead>
    <tr>
      <th>Flag</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">--offset</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Read offset, which can end with size suffix (k, MB, GiB, ...)</td>
      <td><code class="highlighter-rouge">""</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--length</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Read length, which can end with size suffix (k, MB, GiB, ...)</td>
      <td><code class="highlighter-rouge">""</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--checksum</code></td>
      <td><code class="highlighter-rouge">bool</code></td>
      <td>Validate the checksum of the object</td>
      <td><code class="highlighter-rouge">false</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--is-cached</code></td>
      <td><code class="highlighter-rouge">bool</code></td>
      <td>Check if the object is cached locally, without downloading it.</td>
      <td><code class="highlighter-rouge">false</code></td>
    </tr>
  </tbody>
</table>

<p><code class="highlighter-rouge">OUT_FILE</code>: filename in already existing directory or <code class="highlighter-rouge">-</code> for <code class="highlighter-rouge">stdout</code></p>

<h4 id="examples">Examples</h4>

<p>1) GET object <code class="highlighter-rouge">myobj.txt</code> from bucket <code class="highlighter-rouge">mybucket</code> and write it as file <code class="highlighter-rouge">~/obj.txt</code></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais get mybucket/myobj.txt ~/obj.txt
</code></pre></div></div>

<p>2) GET object <code class="highlighter-rouge">myobj.txt</code> from cloud bucket <code class="highlighter-rouge">mybucket</code> and write it to standard output</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais get cloud://mybucket/myobj.txt -
</code></pre></div></div>

<p>3) Check if object <code class="highlighter-rouge">myobj.txt</code> from bucket <code class="highlighter-rouge">mybucket</code> is cached locally</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais get <span class="nt">--is-cached</span> mybucket/myobj.txt
</code></pre></div></div>

<p>4) Read Range: GET contents of object <code class="highlighter-rouge">myobj.txt</code> starting from offset <code class="highlighter-rouge">1024</code> length <code class="highlighter-rouge">1024</code></p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais get mybucket/myobj.txt ~/obj.txt <span class="nt">--offset</span> 1024 <span class="nt">--length</span> 1024
</code></pre></div></div>

<h3 id="cat">CAT</h3>

<p><code class="highlighter-rouge">ais cat BUCKET_NAME/OBJECT_NAME</code></p>

<p>Get <code class="highlighter-rouge">OBJECT_NAME</code> from bucket <code class="highlighter-rouge">BUCKET_NAME</code> and print it to standard output. Alias for <code class="highlighter-rouge">ais get BUCKET_NAME/OBJECT_NAME -</code></p>

<h4 id="examples-1">Examples</h4>

<p>1) GET object <code class="highlighter-rouge">myobj.txt</code> from local bucket <code class="highlighter-rouge">mybucket</code> and print it to stdout</p>

<p>```shell script
$ ais cat mybucket/myobj.txt -</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
2) Read Range: get contents of object `myobj.txt` starting from offset `1024` length `1024` and print to standard output
```shell script
$ ais cat mybucket/myobj.txt --offset 1024 --length 1024
</code></pre></div></div>

<h3 id="show">SHOW</h3>

<p><code class="highlighter-rouge">ais show object BUCKET_NAME/OBJECT_NAME [PROP_LIST]</code></p>

<p>Get object detailed information.
<code class="highlighter-rouge">PROP_LIST</code> is a comma-separated list of properties to display.
If <code class="highlighter-rouge">PROP_LIST</code> is omitted default properties are shown (all except <code class="highlighter-rouge">provider</code> property).</p>

<p>Supported properties:</p>

<ul>
  <li><code class="highlighter-rouge">provider</code> - provider of the object’s bucket, <code class="highlighter-rouge">ais</code> returned if local bucket</li>
  <li><code class="highlighter-rouge">iscached</code> - is the object cached on local drives (always <code class="highlighter-rouge">true</code> for AIS buckets)</li>
  <li><code class="highlighter-rouge">size</code> - object size</li>
  <li><code class="highlighter-rouge">version</code> - object version (it is empty if versioning is disabled for the bucket)</li>
  <li><code class="highlighter-rouge">atime</code> - object’s last access time</li>
  <li><code class="highlighter-rouge">copies</code> - the number of object replicas per target (empty if bucket mirroring is disabled)</li>
  <li><code class="highlighter-rouge">checksum</code> - object’s checksum</li>
  <li><code class="highlighter-rouge">ec</code> - object’s EC info (empty if EC is disabled for the bucket, if EC is enabled it looks like <code class="highlighter-rouge">DATA:PARITY[MODE]</code>, where <code class="highlighter-rouge">DATA</code> - the number of data slices, <code class="highlighter-rouge">PARITY</code> - the number of parity slices, and <code class="highlighter-rouge">MODE</code> is protection mode selected for the object: <code class="highlighter-rouge">replicated</code> - object has <code class="highlighter-rouge">PARITY</code> replicas on other targets, <code class="highlighter-rouge">encoded</code>  the object is erasure coded and other targets contains only encoded slices</li>
</ul>

<h4 id="examples-2">Examples</h4>

<p><code class="highlighter-rouge">ais show object mybucket/myobj.txt</code></p>

<p>Display all properties of object <code class="highlighter-rouge">myobj.txt</code> from bucket <code class="highlighter-rouge">mybucket</code>. Output example:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais show object mybucket/myobj.txt
Checksum                Size    Atime                   Iscached        Version Copies  Ec
2d61e9b8b299c41f        7.63MiB 06 Jan 20 14:55 PST     <span class="nb">true            </span>1       1       2:2[encoded]
</code></pre></div></div>

<p>Show only selected properties:</p>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais show object mybucket/myobj2.txt <span class="nt">-props</span> size,version,ec<span class="sb">`</span>
Size    Version Ec
7.63MiB 1       2:2[replicated]
</code></pre></div></div>

<h3 id="put">PUT</h3>

<p><code class="highlighter-rouge">ais put FILE|DIRECTORY BUCKET_NAME/[OBJECT_NAME]</code><sup id="a1"><a href="#ft1">1</a></sup></p>

<p>PUT an object or entire directory (of objects) into the specified bucket. If CLI detects that a user is going to put more than one file, it calculates the total number of files, total data size and checks if the bucket is empty, then shows all gathered info to the user and asks for confirmation to continue. Confirmation request can be disabled with the option <code class="highlighter-rouge">--yes</code> for use in scripts.</p>

<table>
  <thead>
    <tr>
      <th>Flag</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">--trim-prefix</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Prefix that is removed when constructing object name from file name. Used if <code class="highlighter-rouge">OBJECT_NAME</code> is not given set <sup id="a2"><a href="#ft2">2</a></sup></td>
      <td><code class="highlighter-rouge">""</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--verbose</code> or <code class="highlighter-rouge">-v</code></td>
      <td><code class="highlighter-rouge">bool</code></td>
      <td>Enable printing the result of every PUT</td>
      <td><code class="highlighter-rouge">false</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--yes</code> or <code class="highlighter-rouge">-y</code></td>
      <td><code class="highlighter-rouge">bool</code></td>
      <td>Answer <code class="highlighter-rouge">yes</code> to every confirmation prompt</td>
      <td><code class="highlighter-rouge">false</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--conc</code></td>
      <td><code class="highlighter-rouge">int</code></td>
      <td>Number of concurrent <code class="highlighter-rouge">PUT</code> requests limit</td>
      <td><code class="highlighter-rouge">10</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--recursive</code> or <code class="highlighter-rouge">-r</code></td>
      <td><code class="highlighter-rouge">bool</code></td>
      <td>Enable recursive directory upload</td>
      <td><code class="highlighter-rouge">false</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--refresh</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Frequency of the reporting the progress (in milliseconds), may contain multiplicative suffix <code class="highlighter-rouge">s</code>(second) or <code class="highlighter-rouge">m</code>(minute). Zero value disables periodical refresh</td>
      <td><code class="highlighter-rouge">0</code> if verbose mode is on, <code class="highlighter-rouge">5s</code> otherwise</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--dry-run</code></td>
      <td><code class="highlighter-rouge">bool</code></td>
      <td>Do not actually perform PUT. Shows a few files to be uploaded and corresponding object names for used arguments</td>
      <td> </td>
    </tr>
  </tbody>
</table>

<p><a name="ft1">1</a> <code class="highlighter-rouge">FILE|DIRECTORY</code> should point to a file or a directory. Wildcards are supported, but they work a bit differently from shell wildcards.
 Symbols <code class="highlighter-rouge">*</code> and <code class="highlighter-rouge">?</code> can be used only in a file name pattern. Directory names cannot include wildcards. Only a file name is matched, not full file path, so <code class="highlighter-rouge">/home/user/*.tar --recursive</code> matches not only <code class="highlighter-rouge">.tar</code> files inside <code class="highlighter-rouge">/home/user</code> but any <code class="highlighter-rouge">.tar</code> file in any <code class="highlighter-rouge">/home/user/</code> subdirectory.
 This makes shell wildcards like <code class="highlighter-rouge">**</code> redundant, and the following patterns won’t work in <code class="highlighter-rouge">ais</code>: <code class="highlighter-rouge">/home/user/img-set-*/*.tar</code> or <code class="highlighter-rouge">/home/user/bck/**/*.tar.gz</code></p>

<p><a name="ft2">2</a> Option <code class="highlighter-rouge">--trim-prefix</code> and argument <code class="highlighter-rouge">OBJECT_NAME</code> are mutually exclusive and <code class="highlighter-rouge">OBJECT_NAME</code> has higher priority. When <code class="highlighter-rouge">OBJECT_NAME</code> is given, options <code class="highlighter-rouge">--trim-prefix</code> and <code class="highlighter-rouge">--recursive</code> are ignored, and <code class="highlighter-rouge">FILE</code> must point to an existing file. File masks and directory uploading are not supported in single-file upload mode.</p>

<h4 id="object-names">Object names</h4>

<p>PUT command handles two possible ways to specify resulting object names:</p>
<ul>
  <li>Object name is not provided: <code class="highlighter-rouge">ais put path/to/(..)/file.go bucket/</code> creates object <code class="highlighter-rouge">file.go</code> in <code class="highlighter-rouge">bucket</code></li>
  <li>Explicit object name is provided: <code class="highlighter-rouge">ais put path/to/(..)/file.go bucket/path/to/object.go</code> creates object <code class="highlighter-rouge">path/to/object.go</code> in <code class="highlighter-rouge">bucket</code></li>
</ul>

<p>PUT command uses implicit object names if its source references multiple files:</p>

<ul>
  <li>If source is specified as an absolute path, or is abbreviation like <code class="highlighter-rouge">~</code>, (for example <code class="highlighter-rouge">/tmp/*.go</code> or <code class="highlighter-rouge">~/dir</code>))
resulting objects names will be the same as the absolute path (<code class="highlighter-rouge">~</code> will be resolved to for example <code class="highlighter-rouge">/home/user</code>).</li>
  <li>If source is specified as relative path (for example <code class="highlighter-rouge">dir/*.go</code> or <code class="highlighter-rouge">dir/file{0..10}.txt</code>) resulting objects names
will be the same as the relative path.</li>
  <li>Abbreviations like <code class="highlighter-rouge">../</code> are not supported at the moment.</li>
</ul>

<p>Leading prefix can be removed with <code class="highlighter-rouge">--trim-prefix</code>.</p>

<h4 id="examples-3">Examples</h4>

<p>All examples below put into an empty bucket and the source directory structure is:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>/home/user/bck/img1.tar
/home/user/bck/img2.zip
/home/user/bck/extra/img1.tar
/home/user/bck/extra/img3.zip
</code></pre></div></div>

<p>The current user HOME directory is <code class="highlighter-rouge">/home/user</code>.</p>

<p>1) PUT a single file <code class="highlighter-rouge">img1.tar</code> into local bucket <code class="highlighter-rouge">mybucket</code>, name it <code class="highlighter-rouge">img-set-1.tar</code></p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais put <span class="s2">"/home/user/bck/img1.tar"</span> ais://mybucket/img-set-1.tar

<span class="c"># PUT /home/user/bck/img1.tar =&gt; ais://mybucket/img-set-1.tar</span>
</code></pre></div></div>

<p>2) PUT a single file <code class="highlighter-rouge">~/bck/img1.tar</code> into bucket <code class="highlighter-rouge">mybucket</code>, without explicit name</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais put <span class="s2">"~/bck/img1.tar"</span> mybucket/

<span class="c"># PUT /home/user/bck/img1.tar =&gt; mybucket/home/user/bck/img-set-1.tar</span>
</code></pre></div></div>

<p>3) PUT two objects, <code class="highlighter-rouge">/home/user/bck/img1.tar</code> and <code class="highlighter-rouge">/home/user/bck/img2.zip</code>, into the root of bucket <code class="highlighter-rouge">mybucket</code>. Note that the path <code class="highlighter-rouge">/home/user/bck</code> is a shortcut for <code class="highlighter-rouge">/home/user/bck/*</code> and that recursion is disabled by default</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais put <span class="s2">"/home/user/bck"</span> mybucket

<span class="c"># PUT /home/user/bck/img1.tar =&gt; mybucket/home/user/bck/img1.tar</span>
<span class="c"># PUT /home/user/bck/img1.tar =&gt; mybucket/home/user/bck/img2.zip</span>
</code></pre></div></div>

<p>4) <code class="highlighter-rouge">--trim-prefix</code> is expanded with user’s home directory into <code class="highlighter-rouge">/home/user/bck</code>, so the final bucket content is <code class="highlighter-rouge">img1.tar</code>, <code class="highlighter-rouge">img2.zip</code>, <code class="highlighter-rouge">extra/img1.tar</code> and <code class="highlighter-rouge">extra/img3.zip</code></p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais put <span class="s2">"/home/user/bck"</span> mybucket/ <span class="nt">--trim-prefix</span><span class="o">=</span>~/bck <span class="nt">--recursive</span>

<span class="c"># PUT /home/user/bck/img1.tar =&gt; mybucket/img1.tar</span>
<span class="c"># PUT /home/user/bck/img1.tar =&gt; mybucket/img2.zip</span>
<span class="c"># PUT /home/user/bck/extra/img1.tar =&gt; mybucket/extra/img1.tar</span>
<span class="c"># PUT /home/user/bck/extra/img3.zip =&gt; mybucket/extra/img3.zip</span>
</code></pre></div></div>

<p>5) Same as above, except that only files matching pattern <code class="highlighter-rouge">*.tar</code> are PUT, so the final bucket content is <code class="highlighter-rouge">img1.tar</code> and `extra/img1.tar</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais put <span class="s2">"~/bck/*.tar"</span> mybucket/ <span class="nt">--trim-prefix</span><span class="o">=</span>~/bck <span class="nt">--recursive</span>

<span class="c"># PUT /home/user/bck/img1.tar =&gt; mybucket/img1.tar</span>
<span class="c"># PUT /home/user/bck/extra/img1.tar =&gt; mybucket/extra/img1.tar</span>
</code></pre></div></div>

<p>6) PUT 9 files to <code class="highlighter-rouge">mybucket</code> using range request. Object names formatted as <code class="highlighter-rouge">/home/user/dir/test${d1}${d2}.txt</code>
```shell script
$ for d1 in {0..2}; do for d2 in {0..2}; do echo “0” &gt; ~/dir/test${d1}${d2}.txt; done; done
$ ais put “~/dir/test{0..2}{0..2}.txt” mybucket -y
9 objects put into “mybucket” bucket</p>

<h1 id="put-homeuserdirtest00txt--homeuserdirtest00txt-and-8-more">PUT /home/user/dir/test00.txt =&gt; /home/user/dir/test00.txt and 8 more</h1>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
7) Same as above, except object names are in format `test${d1}${d2}.txt`
```shell script
$ for d1 in {0..2}; do for d2 in {0..2}; do echo "0" &gt; ~/dir/test${d1}${d2}.txt; done; done
$ ais put "~/dir/test{0..2}{0..2}.txt" mybucket -y --trim-prefix=~/dir
9 objects put into "mybucket" bucket

# PUT /home/user/dir/test00.txt =&gt; test00.txt and 8 more
</code></pre></div></div>

<p>8) Preview the files that would be sent to the cluster, without really putting them.
```shell script
$ for d1 in {0..2}; do for d2 in {0..2}; do echo “0” &gt; ~/dir/test${d1}${d2}.txt; done; done
$ ais put “~/dir/test{0..2}{0..2}.txt” mybucket --trim-prefix=~/dir --dry-run
[DRY RUN] No modifications on the cluster
/home/user/dir/test00.txt =&gt; mybucket/test00.txt
(...)</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
9) Put multiple directories into the cluster with range syntax
```shell script
$ for d1 in {0..10}; do mkdir dir$d1 &amp;&amp; for d2 in {0..2}; do echo "0" &gt; dir$d1/test${d2}.txt; done; done
$ ais put "dir{0..10}" mybucket -y
33 objects put into "mybucket" bucket

# PUT "/home/user/dir0/test0.txt" =&gt; b/dir0/test0.txt and 32 more
</code></pre></div></div>

<h4 id="example-invalid-file">Example: invalid file</h4>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais put <span class="s2">"/home/user/bck/*.tar"</span> mybucket/img1.tar <span class="nt">--trim-prefix</span><span class="o">=</span>~/bck <span class="nt">--recursive</span>
</code></pre></div></div>

<p>Note that <code class="highlighter-rouge">OBJECT_NAME</code> has a priority over flags (<code class="highlighter-rouge">--trim-prefix</code> and <code class="highlighter-rouge">--recursive</code>) and <code class="highlighter-rouge">/home/user/bck/*.tar</code> is not a valid because only single file is expected.</p>

<h3 id="promote">PROMOTE</h3>

<p><code class="highlighter-rouge">ais promote FILE|DIRECTORY BUCKET_NAME/[OBJECT_NAME]</code><sup id="a1"><a href="#ft1">1</a></sup></p>

<p>Promote <strong>AIS-colocated</strong> files and directories to AIS objects in a specified bucket.
Colocation in the context means that the files in question are already located <em>inside</em> AIStore (bare-metal or virtual) storage servers (targets).</p>

<table>
  <thead>
    <tr>
      <th>Flag</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">--trim-prefix</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Pathname prefix that is omitted i.e., not used to generate object names</td>
      <td><code class="highlighter-rouge">""</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--verbose</code> or <code class="highlighter-rouge">-v</code></td>
      <td><code class="highlighter-rouge">bool</code></td>
      <td>Verbose printout</td>
      <td><code class="highlighter-rouge">false</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--target</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Target ID; if specified, only the file/dir content stored on the corresponding AIS target is promoted</td>
      <td><code class="highlighter-rouge">""</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--recursive</code> or <code class="highlighter-rouge">-r</code></td>
      <td><code class="highlighter-rouge">bool</code></td>
      <td>Promote nested directories</td>
      <td><code class="highlighter-rouge">false</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--overwrite</code> or <code class="highlighter-rouge">-o</code></td>
      <td><code class="highlighter-rouge">bool</code></td>
      <td>Overwrite destination (object) if exists</td>
      <td><code class="highlighter-rouge">false</code></td>
    </tr>
  </tbody>
</table>

<h4 id="examples-4">Examples</h4>

<p>1) Make AIS objects out of <code class="highlighter-rouge">/tmp/examples</code> files (<strong>one file = one object</strong>). <code class="highlighter-rouge">/tmp/examples</code> is a directory present on some (or all) of the deployed storage nodes. Created objects names have prefix <code class="highlighter-rouge">example</code>
```shell script
$ ais promote /tmp/examples mybucket/ -r</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
2) Promote /tmp/examples files to AIS objects. Objects names won't have `/tmp/examples` prefix
```shell script
$ ais promote /tmp/examples mybucket/ -r --trim-prefix=/tmp
</code></pre></div></div>

<p>3) Promote /tmp/examples/example1.txt as object with name <code class="highlighter-rouge">example1.txt</code>
```shell script
$ ais promote /tmp/examples/example1.txt mybucket/example1.txt</p>

<h1 id="promote-tmpexamplesexample1txt--mybucketexample1txt">PROMOTE /tmp/examples/example1.txt =&gt; mybucket/example1.txt</h1>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
4) Promote /tmp/examples/example1.txt without specified object name
```shell script
$ ais promote /tmp/examples/example1.txt mybucket

# PROMOTE /tmp/examples/example1.txt =&gt; mybucket/tmp/examples/example1.txt
</code></pre></div></div>

<h4 id="example-no-such-file-or-directory">Example: no such file or directory</h4>

<p>```shell script
$ ais create bucket testbucket
testbucket bucket created</p>

<p>$ ais status
Target		 %MemUsed	 MemAvail	 %CapUsed	 CapAvail	 %CpuUsed	 Rebalance
1014646t8081	   0.00		 4.00GiB	 50		 100.000GiB	   0.00		 finished; 0 objs moved (0B)
...
$ ais promote /target/1014646t8081/nonexistent/dir/ testbucket --target 1014646t8081 # directory doesn’t exist on target 1014646t8081
(...) Bad Request: stat /target/1014646t8081/nonexistent/dir: no such file or directory</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>
&gt; The capability is intended to support existing toolchains that operate on files. Here's the rationale:

&gt;&gt; On the one hand, it is easy to transform files using `tar`, `gzip` and any number of other very familiar Unix tools. On the other hand, it is easy to **promote** files and directories that are locally present inside AIS servers. Once the original file-based content becomes distributed across AIStore cluster, running massive computations (or any other workloads that require scalable storage) also becomes easy and fast.

#### Object names

1. `PROMOTE` with directory as source
- `OBJECT_NAME` parameter is not supported
- If `--trim-prefix` is set, the object's name is the file path without leading `--trim-prefix`. A trailing `/` in `--trim-prefix` can be omitted.
- If `--trim-prefix` is not defined, resulting object names will be the same as full paths to files

Be careful when putting a directory recursively without setting `--trim-prefix`: it may result in overwriting objects with the same names.

2. `PROMOTE` with single file as source
- `--trim-prefix` flag is omitted
- If `OBJECT_NAME` provided it will be used as object name
- If `OBJECT_NAME` not provided, object name will be the same as the full path to the file, without leading `/`

### Delete

`ais rm object BUCKET_NAME/[OBJECT_NAME]...`

Delete an object or list/range of objects from the bucket.

| Flag | Type | Description | Default |
| --- | --- | --- | --- |
| `--list` | `string` | Comma separated list of objects for list deletion &lt;sup id="a3"&gt;[3](#ft3) | `""` |
| `--range` | `string` | Start and end interval (eg. 1:100) for range deletion &lt;sup id="a4"&gt;[3](#ft3) | `""` |
| `--prefix` | `string` | Prefix for range deletion | `""` |
| `--regex` | `string` | Regex for range deletion | `""` |
| `--deadline` | `string` | Time duration before the request expires [(Go's time.Duration string)](https://golang.org/pkg/time/#Duration.String) | `0s` (no deadline) |
| `--wait` | `bool` | Wait for operation to finish before returning response | `true` |

&lt;a name="ft3"&gt;3&lt;/a&gt; Options `--list,--range` and argument(s) `OBJECT_NAME` are mutually exclusive. List and range deletions expect only a bucket name; if one or more
`OBJECT_NAME`s are given, a separate `DELETE` request is sent for each object.

#### Examples

1) Delete object `myobj` from bucket `mybucket`
```sh
$ ais rm object mybucket/myobj
</code></pre></div></div>

<p>2) Delete objects (<code class="highlighter-rouge">obj1</code>, <code class="highlighter-rouge">obj2</code>) from buckets (<code class="highlighter-rouge">aisbck</code>, <code class="highlighter-rouge">cloudbck</code>) respectively</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais <span class="nb">rm </span>object aisbck/obj1 cloudbck/obj2
</code></pre></div></div>

<p>3) Delete a list of objects (<code class="highlighter-rouge">obj1</code>, <code class="highlighter-rouge">obj2</code>, <code class="highlighter-rouge">obj3</code>) from bucket <code class="highlighter-rouge">mybucket</code></p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais <span class="nb">rm </span>object mybucket/ <span class="nt">--list</span> <span class="s2">"obj1,obj2,obj3"</span>
</code></pre></div></div>

<p>4) Delete all objects in range <code class="highlighter-rouge">001-003</code>, with prefix <code class="highlighter-rouge">test-</code>, matching <code class="highlighter-rouge">[0-9][0-9][0-9]</code> regex, from bucket <code class="highlighter-rouge">mybucket</code></p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais <span class="nb">rm </span>object mybucket/ <span class="nt">--range</span> <span class="s2">"1:3"</span> <span class="nt">--prefix</span> <span class="s2">"test-"</span> <span class="nt">--regex</span> <span class="s2">"</span><span class="se">\\</span><span class="s2">d</span><span class="se">\\</span><span class="s2">d</span><span class="se">\\</span><span class="s2">d"</span>
</code></pre></div></div>

<h3 id="evict">Evict</h3>

<p><code class="highlighter-rouge">ais evict BUCKET_NAME/[OBJECT_NAME]...</code></p>

<p><a href="../../docs/bucket.md#prefetchevict-objects">Evict</a> objects from a cloud bucket.</p>

<table>
  <thead>
    <tr>
      <th>Flag</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">--list</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Comma separated list of objects for list deletion <sup id="a5"><a href="#ft4">4</a></sup></td>
      <td><code class="highlighter-rouge">""</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--range</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Start and end interval (eg. 1:100) for range deletion <sup id="a6"><a href="#ft4">4</a></sup></td>
      <td><code class="highlighter-rouge">""</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--prefix</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Prefix for range deletion</td>
      <td><code class="highlighter-rouge">""</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--regex</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Regex for range deletion</td>
      <td><code class="highlighter-rouge">""</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--deadline</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Time duration before the request expires <a href="https://golang.org/pkg/time/#Duration.String">(Go’s time.Duration string)</a></td>
      <td><code class="highlighter-rouge">0s</code> (no deadline)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--wait</code></td>
      <td><code class="highlighter-rouge">bool</code></td>
      <td>Wait for operation to finish before returning response</td>
      <td><code class="highlighter-rouge">true</code></td>
    </tr>
  </tbody>
</table>

<p><a name="ft4">4</a> Options <code class="highlighter-rouge">--list,--range</code> and argument(s) <code class="highlighter-rouge">OBJECT_NAME</code> are mutually exclusive. List and range evictions expect only a bucket name; if one or more
<code class="highlighter-rouge">OBJECT_NAME</code>s are given, a separate eviction request is sent for each object.</p>

<h4 id="examples-5">Examples</h4>

<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ais put file.txt cloudbucket/file.txt
PUT file.txt into bucket cloudbucket
<span class="nv">$ </span>ais show bucket cloudbucket <span class="nt">--cached</span> <span class="c"># show only cloudbucket objects present in the AIS cluster</span>
Name	    Objects	Size	Used<span class="o">(</span>%<span class="o">)</span>	Provider
cloudbucket	1	    702B	0%	    aws

<span class="nv">$ </span>ais evict cloudbucket/file.txt
file.txt evicted from cloudbucket bucket
<span class="nv">$ </span>ais show bucket cloudbucket <span class="nt">--cached</span>
Name	    Objects	Size	Used<span class="o">(</span>%<span class="o">)</span>	Provider
cloudbucket	0	    0B	    0%	    aws
</code></pre></div></div>

<h3 id="prefetch">Prefetch</h3>

<p><code class="highlighter-rouge">ais prefetch BUCKET_NAME/ --list|--range &lt;value&gt;</code></p>

<p><a href="../../docs/bucket.md#prefetchevict-objects">Prefetch</a> objects from the cloud bucket.</p>

<table>
  <thead>
    <tr>
      <th>Flag</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">--list</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Comma separated list of objects for list deletion <sup id="a5"><a href="#ft4">4</a></sup></td>
      <td><code class="highlighter-rouge">""</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--range</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Start and end interval (eg. 1:100) for range deletion <sup id="a6"><a href="#ft4">4</a></sup></td>
      <td><code class="highlighter-rouge">""</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--prefix</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Prefix for range deletion</td>
      <td><code class="highlighter-rouge">""</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--regex</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Regex for range deletion</td>
      <td><code class="highlighter-rouge">""</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--deadline</code></td>
      <td><code class="highlighter-rouge">string</code></td>
      <td>Time duration before the request expires <a href="https://golang.org/pkg/time/#Duration.String">(Go’s time.Duration string)</a></td>
      <td><code class="highlighter-rouge">0s</code> (no deadline)</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">--wait</code></td>
      <td><code class="highlighter-rouge">bool</code></td>
      <td>Wait for operation to finish before returning response</td>
      <td><code class="highlighter-rouge">true</code></td>
    </tr>
  </tbody>
</table>

<table>
  <thead>
    <tr>
      <th>Command</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">ais prefetch aws://cloudbucket --list 'o1,o2,o3</code></td>
      <td>Downloads copies of objects o1,o2,o3 from AWS bucket named <code class="highlighter-rouge">cloudbucket</code> and stores them in the AIS cluster</td>
    </tr>
  </tbody>
</table>

<h3 id="rename">Rename</h3>

<p><code class="highlighter-rouge">ais rename object BUCKET_NAME/OBJECT_NAME NEW_OBJECT_NAME</code></p>

<p>Rename object from an ais bucket.</p>

<h4 id="examples-6">Examples</h4>

<p>1) Rename object <code class="highlighter-rouge">obj1</code> as <code class="highlighter-rouge">obj2</code></p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code>ais rename object mybucket/obj1 obj2
</code></pre></div></div>

<h3 id="concat">Concat</h3>

<p><code class="highlighter-rouge">ais concat DIRNAME|FILENAME [DIRNAME|FILENAME...] BUCKET/OBJECT_NAME</code></p>

<p>Create an object in a bucket by concatenating provided files, keeping the order as in the arguments list.
If directory provided, files within the directory are sorted by filename.
For each file sends a separate request to the cluster.
Supports recursive iteration through directories and wildcards in the same way as PUT operation does.</p>

<table>
  <thead>
    <tr>
      <th>Command</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">ais concat file1.txt dir/file2.txt mybucket/obj</code></td>
      <td>In two separate requests sends <code class="highlighter-rouge">file1.txt</code> and <code class="highlighter-rouge">dir/file2.txt</code> to the cluster, concatenates the files keeping the order and saves them as <code class="highlighter-rouge">obj</code> in bucket <code class="highlighter-rouge">mybucket</code></td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ais concat file1.txt dir/file2.txt mybucket/obj --verbose</code></td>
      <td>Same as above, but additionally shows progress bar of sending the files to the cluster</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">ais concat dirB dirA mybucket/obj</code></td>
      <td>Creates <code class="highlighter-rouge">obj</code> in bucket <code class="highlighter-rouge">mybucket</code> which is concatenation of sorted files from <code class="highlighter-rouge">dirB</code> with sorted files from <code class="highlighter-rouge">dirA</code></td>
    </tr>
  </tbody>
</table>

  </div><a class="u-url" href="/aistore/cli/resources/object" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/aistore/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">AIStore - distributed object storage</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">AIStore - distributed object storage</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>AIStore is a lightweight object storage system with the capability to linearly scale-out with each added storage node and a special focus on petascale deep learning. See more at: github.com/NVIDIA/aistore
</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
