<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.6.1 -->
<title>CLI | AIStore - distributed object storage</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="CLI" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="AIStore is a lightweight object storage system with the capability to linearly scale-out with each added storage node and a special focus on petascale deep learning. See more at: github.com/NVIDIA/aistore" />
<meta property="og:description" content="AIStore is a lightweight object storage system with the capability to linearly scale-out with each added storage node and a special focus on petascale deep learning. See more at: github.com/NVIDIA/aistore" />
<link rel="canonical" href="http://localhost:4000/aistore/cli" />
<meta property="og:url" content="http://localhost:4000/aistore/cli" />
<meta property="og:site_name" content="AIStore - distributed object storage" />
<script type="application/ld+json">
{"headline":"CLI","@type":"WebPage","url":"http://localhost:4000/aistore/cli","description":"AIStore is a lightweight object storage system with the capability to linearly scale-out with each added storage node and a special focus on petascale deep learning. See more at: github.com/NVIDIA/aistore","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/aistore/assets/main.css"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/aistore/feed.xml" title="AIStore - distributed object storage" /></head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/aistore/">AIStore - distributed object storage</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">CLI</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="" itemprop="datePublished">
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <h1 id="ais-cli">AIS CLI</h1>

<p>AIS Command Line Interface is a tool used to interact with resources of AIStore. It gives users the ability to query information from specific daemons,
create or delete resources or download files to buckets directly from the command line.</p>

<h2 id="getting-started">Getting Started</h2>

<p>Run the <code class="highlighter-rouge">install.sh</code> script to install AIS CLI binary in your <code class="highlighter-rouge">$GOPATH/bin</code> directory.
The script also allows you to install <a href="#ais-cli-shell-auto-complete">shell autocompletions</a> for AIS CLI.</p>
<blockquote>
  <p>The rest of the README assumes that user’s <code class="highlighter-rouge">PATH</code> environment variable contains <code class="highlighter-rouge">$GOPATH/bin</code> directory.
Run <code class="highlighter-rouge">export PATH=$PATH:$GOPATH/bin</code> if this is not the case for you.
You can read more about GOPATH environment variable <a href="https://golang.org/doc/code.html#GOPATH">here</a>.</p>
</blockquote>

<h2 id="using-ais-cli">Using AIS CLI</h2>

<p>AIS CLI makes requests to AIStore cluster. It resolves cluster address in the following order:</p>
<ol>
  <li><code class="highlighter-rouge">AIS_URL</code> environment variable (eg. <code class="highlighter-rouge">http://&lt;YOUR_CLUSTER_IP&gt;:&lt;PORT&gt;</code>); if not present:</li>
  <li>Discovers IP address of proxy kubernetes pod; if kubernetes runs multiple clusters, set an environment variable <code class="highlighter-rouge">AIS_NAMESPACE</code> to select a proxy from the given namespace</li>
  <li>Discovers IP address of proxy docker container; if multiple docker clusters running, picks the IP address of one of them and prints relevant message;
if not successful or local non-containerized deployment:</li>
  <li>Default <code class="highlighter-rouge">http://172.50.0.2:8080</code> and <code class="highlighter-rouge">http://127.0.0.1:8080</code> for local containerized and non-containerized deployments respectively</li>
</ol>

<p>This command returns the list of commands for the CLI.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ais <span class="nt">--help</span>
</code></pre></div></div>
<p>This command returns the status of the cluster; if successful, the cluster address was resolved correctly.</p>
<div class="language-sh highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>ais status
</code></pre></div></div>

<h2 id="ais-cli-shell-auto-complete">AIS CLI Shell Auto-Complete</h2>

<p>The CLI tool supports bash and zsh auto-complete functionality.</p>

<h5 id="installing">Installing</h5>

<p>When running <code class="highlighter-rouge">install.sh</code> you will be asked if you want to install autocompletions.
To install them manually, run <code class="highlighter-rouge">bash autocomplete/install.sh</code>.</p>

<h5 id="uninstalling">Uninstalling</h5>

<p>To uninstall autocompletions run <code class="highlighter-rouge">bash autocomplete/uninstall.sh</code>.</p>

<h2 id="supported-resources">Supported Resources</h2>

<p>List of available CLI resources</p>

<ul>
  <li>
    <p><a href="./resources/bucket.md">Bucket</a></p>
  </li>
  <li>
    <p><a href="./resources/object.md">Object</a></p>
  </li>
  <li>
    <p><a href="./resources/daeclu.md">Daemon/Cluster</a></p>
  </li>
  <li>
    <p><a href="./resources/xaction.md">Xaction</a></p>
  </li>
  <li>
    <p><a href="./resources/download.md">Downloader</a></p>
  </li>
  <li>
    <p><a href="./resources/dsort.md">DSort</a></p>
  </li>
  <li>
    <p><a href="./resources/users.md">Auth</a></p>
  </li>
</ul>

<h2 id="info-for-developers">Info For Developers</h2>

<p>The CLI uses <a href="https://github.com/urfave/cli">urfave/cli</a> framework.</p>

<h3 id="adding-new-commands">Adding New Commands</h3>

<p>Currently, the CLI has the format of ‘<code class="highlighter-rouge">ais &lt;command&gt; &lt;resource&gt;</code>’.</p>

<p>To add a new resource to an existing command,</p>

<ol>
  <li>Create a subcommand entry for the resource in the command object</li>
  <li>Create an entry in the command’s flag map for the new resource</li>
  <li>Register flags in the subcommand object</li>
  <li>Register the handler function (named <code class="highlighter-rouge">XXXHandler</code>) in the subcommand object</li>
</ol>

<p>To add a new resource to a new command,</p>

<ol>
  <li>Create a new Go file (named <code class="highlighter-rouge">xxx_hdlr.go</code>) with the name of the new command and follow the format of existing files</li>
  <li>Once the new command and subcommands are implemented, make sure to register the new command with the CLI (see <code class="highlighter-rouge">setupCommands()</code> in <code class="highlighter-rouge">app.go</code>)</li>
</ol>

<h2 id="default-flag-and-argument-values-via-environment-variables">Default flag and argument values via environment variables</h2>

<h4 id="bucket-provider">Bucket Provider</h4>
<p>If <code class="highlighter-rouge">AIS_BUCKET_PROVIDER</code> environment variable is set, the default bucket provider is set to the value of this variable.
If provider is given in <code class="highlighter-rouge">BUCKET_NAME</code> ie <code class="highlighter-rouge">aws://BUCKET_NAME</code>, <code class="highlighter-rouge">AIS_BUCKET_PROVIDER</code> is ignored.
Provider syntax <code class="highlighter-rouge">[provider://]BUCKET_NAME</code> is valid CLI-wide, meaning that every command supporting <code class="highlighter-rouge">BUCKET_NAME</code> argument
also supports provider syntax. For more details refer to each command’s documentation.</p>

<p>Allowed values: <code class="highlighter-rouge">''</code> (autodetect provider), <code class="highlighter-rouge">ais</code> (local cluster), <code class="highlighter-rouge">aws</code> (Amazon Web Services), <code class="highlighter-rouge">gcp</code> (Google Cloud Platform),
<code class="highlighter-rouge">cloud</code> (anonymous - cloud provider determined automatically)</p>

  </div><a class="u-url" href="/aistore/cli" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/aistore/"></data>

  <div class="wrapper">

    <h2 class="footer-heading">AIStore - distributed object storage</h2>

    <div class="footer-col-wrapper">
      <div class="footer-col footer-col-1">
        <ul class="contact-list">
          <li class="p-name">AIStore - distributed object storage</li></ul>
      </div>

      <div class="footer-col footer-col-2"><ul class="social-media-list"></ul>
</div>

      <div class="footer-col footer-col-3">
        <p>AIStore is a lightweight object storage system with the capability to linearly scale-out with each added storage node and a special focus on petascale deep learning. See more at: github.com/NVIDIA/aistore
</p>
      </div>
    </div>

  </div>

</footer>
</body>

</html>
